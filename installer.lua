local x,y = term.getSize()
term.setBackgroundColor(colors.white)
term.clear()
term.setCursorPos(1,1)
term.setTextColor(colors.black)
print("downloading installer.lua...")
term.setBackgroundColor(colors.red)
term.setCursorPos(1,3)
term.write("          ")
os.sleep(1)
term.setBackgroundColor(colors.green)
term.setCursorPos(1,3)

term.write(" ")
os.sleep(0.2)
term.write(" ")
os.sleep(0.2)
term.write(" ")
os.sleep(0.2)
term.write(" ")
os.sleep(0.2)
term.write(" ")
os.sleep(0.1)
term.write(" ")
os.sleep(0.1)
term.write(" ")
os.sleep(0.2)
term.write(" ")
os.sleep(0.1)
term.write(" ")
os.sleep(0.1)
term.write(" ")
os.sleep(2)

term.setBackgroundColor(colors.cyan)
term.setTextColor(colors.white)
term.clear()
term.setCursorPos((x/2 - 8),(y/2))
term.write("testOS installer")

term.setCursorPos((x/2 - 11),(y/2 + 2))
term.setBackgroundColor(colors.red)
term.write("                     ")
term.setCursorPos((x/2 - 11),(y/2 + 2))
term.setBackgroundColor(colors.green)

function newload(current,index)
    term.setBackgroundColor(colors.green)
    term.setCursorPos(((x/2 - 11) + index),(y/2 + 2))
    term.write(" ")
    term.setCursorPos(((x/2 - (string.len(current)/2)) + index),(y/2 + 4))
    term.setBackgroundColor(colors.cyan)
    term.write(current)
    os.sleep(0.1)
end

os.sleep(0.5)

--create dir
newload("creating ./libs",0)
shell.run("background","mkdir","./libs")
newload("creating ./libs/testos-ui",1)
shell.run("background","mkdir","./libs/testos-ui")
newload("creating ./libs/cobalt",2)
shell.run("background","mkdir","./libs/cobalt")
newload("creating ./libs/cobalt/lib",3)
shell.run("background","mkdir","./libs/cobalt/lib")
newload("creating ./libs/cobalt/lib/modules",4)
shell.run("background","mkdir","./libs/cobalt/lib/modules")
newload("creating ./libs/cobalt/lib/modules/graphics",5)
shell.run("background","mkdir","./libs/cobalt/lib/modules/graphics")
newload("creating ./libs/cobalt/lib/modules/keyboard",6)
shell.run("background","mkdir","./libs/cobalt/lib/modules/keyboard")
newload("creating ./libs/cobalt/lib/modules/mouse",7)
shell.run("background","mkdir","./libs/cobalt/lib/modules/mouse")
newload("creating ./libs/cobalt/lib/modules/graphics/classes",8)
shell.run("background","mkdir","./libs/cobalt/lib/modules/graphics/classes")

term.setCursorPos((x/2 - 2),(y/2 + 2))

shell.run("background","wget","https://raw.githubusercontent.com/DJj123dj/testSystem/main/startup.lua","./startup.lua")

os.sleep(2)


--install testos-ui
shell.run("background","wget","https://raw.githubusercontent.com/DJj123dj/testSystem/main/main.lua","./main.lua")
term.write(" ")
os.sleep(0.1)
shell.run("background","wget","https://raw.githubusercontent.com/DJj123dj/testSystem/main/libs/testos-ui/main.lua","./libs/testos-ui/main.lua")
term.write(" ")
os.sleep(2)

--cobalt instalation
shell.run("background","wget","https://raw.githubusercontent.com/DJj123dj/testSystem/main/libs/cobalt/init.lua","./libs/cobalt/init.lua")
term.write(" ")
os.sleep(0.1)
shell.run("background","wget","https://raw.githubusercontent.com/DJj123dj/testSystem/main/libs/cobalt/lib/clasp.lua","./libs/cobalt/lib/clasp.lua")
term.write(" ")
os.sleep(0.1)
shell.run("background","wget","https://raw.githubusercontent.com/DJj123dj/testSystem/main/libs/cobalt/lib/surface.lua","./libs/cobalt/lib/surface.lua")
term.write(" ")
os.sleep(0.1)

shell.run("background","wget","https://raw.githubusercontent.com/DJj123dj/testSystem/main/libs/cobalt/lib/modules/graphics/init.lua","./libs/cobalt/lib/modules/graphics/init.lua")
term.write(" ")
os.sleep(0.1)
shell.run("background","wget","https://raw.githubusercontent.com/DJj123dj/testSystem/main/libs/cobalt/lib/modules/keyboard/init.lua","./libs/cobalt/lib/modules/keyboard/init.lua")
term.write(" ")
os.sleep(0.1)
shell.run("background","wget","https://raw.githubusercontent.com/DJj123dj/testSystem/main/libs/cobalt/lib/modules/mouse/init.lua","./libs/cobalt/lib/modules/mouse/init.lua")
term.write(" ")
os.sleep(2)

shell.run("background","wget","https://raw.githubusercontent.com/DJj123dj/testSystem/main/libs/cobalt/lib/modules/graphics/classes/Canvas.lua","./libs/cobalt/lib/modules/graphics/classes/Canvas.lua")
term.write(" ")
os.sleep(0.1)
shell.run("background","wget","https://raw.githubusercontent.com/DJj123dj/testSystem/main/libs/cobalt/lib/modules/graphics/classes/Drawable.lua","./libs/cobalt/lib/modules/graphics/classes/Drawable.lua")
term.write(" ")
os.sleep(0.1)
shell.run("background","wget","https://raw.githubusercontent.com/DJj123dj/testSystem/main/libs/cobalt/lib/modules/graphics/classes/Image.lua","./libs/cobalt/lib/modules/graphics/classes/Image.lua")
term.write(" ")
os.sleep(0.1)
os.sleep(3)
os.reboot()